<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scroom: QueueJumper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Scroom
   &#160;<span id="projectnumber">0.14</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classQueueJumper.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classQueueJumper-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">QueueJumper Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for QueueJumper:</div>
<div class="dyncontent">
<div class="center"><img src="classQueueJumper__coll__graph.png" border="0" usemap="#QueueJumper_coll__map" alt="Collaboration graph"/></div>
<map name="QueueJumper_coll__map" id="QueueJumper_coll__map">
<area shape="rect" title=" " alt="" coords="5,5,140,171"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae686df54c2d2c012d6ba89894391daa8"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#ae686df54c2d2c012d6ba89894391daa8">Ptr</a> = boost::shared_ptr&lt; <a class="el" href="classQueueJumper.html">QueueJumper</a> &gt;</td></tr>
<tr class="separator:ae686df54c2d2c012d6ba89894391daa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5dbf1296ec716e239f34b7eed4343ca2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#a5dbf1296ec716e239f34b7eed4343ca2">setWork</a> (boost::function&lt; void()&gt; const &amp;<a class="el" href="classQueueJumper.html#af34fdb126ea4078e80dde8038a95c564">fn</a>)</td></tr>
<tr class="separator:a5dbf1296ec716e239f34b7eed4343ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66bc37b1160a29de9f47ebc0766f2b47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#a66bc37b1160a29de9f47ebc0766f2b47">operator()</a> ()</td></tr>
<tr class="separator:a66bc37b1160a29de9f47ebc0766f2b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5b17c2980aa09df97b92423481e24dc1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classQueueJumper.html#ae686df54c2d2c012d6ba89894391daa8">Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#a5b17c2980aa09df97b92423481e24dc1">create</a> ()</td></tr>
<tr class="memdesc:a5b17c2980aa09df97b92423481e24dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classQueueJumper.html">QueueJumper</a>.  <a href="classQueueJumper.html#a5b17c2980aa09df97b92423481e24dc1">More...</a><br /></td></tr>
<tr class="separator:a5b17c2980aa09df97b92423481e24dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a81c278d92787fd90e1690a6f0dea7ef9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#a81c278d92787fd90e1690a6f0dea7ef9">QueueJumper</a> ()=default</td></tr>
<tr class="separator:a81c278d92787fd90e1690a6f0dea7ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aac5382e9016830f9eee55b9f32215782"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#aac5382e9016830f9eee55b9f32215782">mut</a></td></tr>
<tr class="separator:aac5382e9016830f9eee55b9f32215782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5a773c17b4649f07c61b22751f6ba8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#a9e5a773c17b4649f07c61b22751f6ba8">inQueue</a> {true}</td></tr>
<tr class="separator:a9e5a773c17b4649f07c61b22751f6ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26605a27165f871fd14e586fa3c80b6e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#a26605a27165f871fd14e586fa3c80b6e">isSet</a> {false}</td></tr>
<tr class="separator:a26605a27165f871fd14e586fa3c80b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34fdb126ea4078e80dde8038a95c564"><td class="memItemLeft" align="right" valign="top">boost::function&lt; void()&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQueueJumper.html#af34fdb126ea4078e80dde8038a95c564">fn</a></td></tr>
<tr class="separator:af34fdb126ea4078e80dde8038a95c564"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Jump the queue of a <a class="el" href="classThreadPool.html">ThreadPool</a></p>
<p>Have you ever seen a couple going shopping in the mall, where the husband will go and wait in the queue for the register, while the wife goes out into the shop and brings items to her husband, already waiting to pay them? With <a class="el" href="classQueueJumper.html">QueueJumper</a>, you'll get to be the wife, while <a class="el" href="classQueueJumper.html">QueueJumper</a> is the husband.</p>
<p>You'll <a class="el" href="classQueueJumper.html#a5b17c2980aa09df97b92423481e24dc1" title="QueueJumper.">create()</a> a <a class="el" href="classQueueJumper.html">QueueJumper</a>, and schedule() it on a <a class="el" href="classThreadPool.html">ThreadPool</a>. While the <a class="el" href="classQueueJumper.html">QueueJumper</a> sits in the queue, waiting to be processed, you can do whatever you want. At some later time, you'll call <a class="el" href="classQueueJumper.html#a5dbf1296ec716e239f34b7eed4343ca2">setWork()</a>. If the <a class="el" href="classQueueJumper.html">QueueJumper</a> is still in the queue, it will accept the work, and it will eventually get executed. Of course, if the <a class="el" href="classQueueJumper.html">QueueJumper</a> is no longer in the queue, you're out of luck.</p>
<p><a class="el" href="classQueueJumper.html">QueueJumper</a> is used to maximally use the number of cores you have available in your system, however many (or few) that is. Let's assume you have a single threaded task (say, reading data from a bitmap) that spawns a lot of background tasks (i.e. pre-scaling the bitmap to some pre-defined zoom levels) that can be executed in parallel. On any given system, two things can happen </p><ul>
<li>The scaling is faster than the loading. </li>
<li>The scaling is slower than the loading.</li>
</ul>
<p>Let's assume for the moment that reading data from a bitmap is a task that reads a given number of lines (say 1024 or some such), and then reschedules itself. Let's assume also that all of these threads are scheduled at the same priority. You'll start out as follows: </p><pre class="fragment">| Queue | R
</pre><p> Shown here is a <a class="el" href="classThreadPool.html">ThreadPool</a> queue, with one job in it, marked <code>R</code>, because it is a Reading job. After the reading job has completed, the queue will look as follows: </p><pre class="fragment">| Queue | S S S S S S S S S S
</pre><p> The queue now has some (say 10) scaling jobs in it, which can be executed in parallel. Let's also reschedule our reading task: </p><pre class="fragment">| Queue | S S S S S S S S S S R
</pre><p> Wait a minute! The scaling tasks can be executed in parallel, but the reading task will be scheduled last, and then we'll be back to waiting for it to complete, while my x-core machine is using only one core. Let's fix that by executing our reading task at a higher priority, such that it gets executed first. </p><pre class="fragment">| Higher prio | R
| Normal prio | S S S S S S S S S S
</pre><p> In this scenario, our new reading task will be executed, while the other cores are busy with the scaling jobs. When the scaling jobs are finished, there are hopefully new scaling jobs waiting to be processed.</p>
<p>This will, in fact, work fine if the scaling is faster than the reading. By the time the Reading task has scheduled new Scaling jobs, all the previous ones will have finished. Problems may start, however, if the Reading is faster than the Scaling. When the Reading is finished (and has scheduled 10 new Scaling jobs), the old scaling jobs still haven't completed. As a result, the number of remaining scaling jobs will grow and grow. Worst case, on a 1-core machine, no scaling job will get processed, because there is always a reading job with a higher priority in the queue. That is, of course, until all reading jobs have finished. Scaling will begin only when the bitmap is completely loaded.</p>
<p>For you, this may or may not be a problem. But if you are dealing with very large bitmaps, then a scenario of first loading the bitmap and then scaling it involves a lot of swapping: First you load the bitmap, and as you load it, you'll swap out the older unused parts. And then when you start scaling, you'll have to swap those parts back in. It is much more efficient to do the scaling before swapping out the old parts, and then swap out the old and the scaled parts in one go. This is where <a class="el" href="classQueueJumper.html">QueueJumper</a> can help out.</p>
<p>Let's revisit for a moment the scenario where Reading jobs are scheduled at a higher priority: </p><pre class="fragment">| Higher prio | R
| Normal prio | S S S S S S S S S S
</pre><p> When the Reading job starts, the first thing it does is schedule a <a class="el" href="classQueueJumper.html">QueueJumper</a>: </p><pre class="fragment">| Higher prio |
| Normal prio | S S S S S S S S S S Q
</pre><p> Next, it will proceed to read bitmap data, which will result in additional scaling jobs: </p><pre class="fragment">| Higher prio |
| Normal prio | S S S S S S S S S S Q S S S S S S S S S S
</pre><p> In the mean time, the other cores (if any) are busy with the scaling jobs. Like we observed earlier, there are two possible scenarios</p>
<p><b>Scaling is faster than reading</b><br  />
 When the reading job completes, all earlier scaling jobs will have finished. Also, the <a class="el" href="classQueueJumper.html">QueueJumper</a> will have been processed (doing no work) </p><pre class="fragment">| Higher prio |
| Normal prio | S S S S S S S S S S
</pre><p> In this case, <a class="el" href="classQueueJumper.html#a5dbf1296ec716e239f34b7eed4343ca2">QueueJumper::setWork()</a> will fail, because the <a class="el" href="classQueueJumper.html">QueueJumper</a> is no longer in the queue. You will have to reschedule your reading task at the higher priority, like we did before: </p><pre class="fragment">| Higher prio | R
| Normal prio | S S S S S S S S S S
</pre><p> In this scenario, you are not optimally using all cores, because reading is a bottleneck.</p>
<p><b>Reading is faster than scaling</b><br  />
 When the reading job completes, there will still be scaling jobs left in the queue. Also the <a class="el" href="classQueueJumper.html">QueueJumper</a> will still be there: </p><pre class="fragment">| Higher prio |
| Normal prio | S S S S Q S S S S S S S S S S
</pre><p> If we now schedule a Reading task at a higher priority, like before, then the number of scaling tasks will grow and grow. But if we call <a class="el" href="classQueueJumper.html#a5dbf1296ec716e239f34b7eed4343ca2">QueueJumper::setWork()</a>, then we can effectively substitute the <a class="el" href="classQueueJumper.html">QueueJumper</a> with our reading task: </p><pre class="fragment">| Higher prio |
| Normal prio | S S S S R S S S S S S S S S S
</pre><p> This way, the reading task will not be started immediately, but still sufficiently early. We can be confident that the new reading task, too, is finished before the scaling tasks that succeed it.</p>
<p>Memory behaviour is very attractive to: We need to have only two "batches" in memory: One that is currently being read and one that is currently being scaled. After those tasks complete, we'll not need the data again until it is time to show the bitmap on the screen.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classTiledBitmap.html">TiledBitmap</a> </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ae686df54c2d2c012d6ba89894391daa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae686df54c2d2c012d6ba89894391daa8">&#9670;&nbsp;</a></span>Ptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classQueueJumper.html#ae686df54c2d2c012d6ba89894391daa8">QueueJumper::Ptr</a> =  boost::shared_ptr&lt;<a class="el" href="classQueueJumper.html">QueueJumper</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a81c278d92787fd90e1690a6f0dea7ef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81c278d92787fd90e1690a6f0dea7ef9">&#9670;&nbsp;</a></span>QueueJumper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QueueJumper::QueueJumper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5b17c2980aa09df97b92423481e24dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b17c2980aa09df97b92423481e24dc1">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQueueJumper.html#ae686df54c2d2c012d6ba89894391daa8">QueueJumper::Ptr</a> QueueJumper::create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classQueueJumper.html">QueueJumper</a>. </p>
<p>Create a <a class="el" href="classQueueJumper.html">QueueJumper</a></p>
<p><a class="el" href="classQueueJumper.html">QueueJumper</a> objects are managed as shared pointers, because there will be two references to it: </p><ul>
<li>one held by the <a class="el" href="classThreadPool.html">ThreadPool</a>, such that it can execute the job </li>
<li>one held by the original submitter, such that it can call <a class="el" href="classQueueJumper.html#a5dbf1296ec716e239f34b7eed4343ca2">setWork()</a></li>
</ul>
<p>The <a class="el" href="classQueueJumper.html">QueueJumper</a> will be destroyed when both parties have released their reference. </p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classQueueJumper.html#ae686df54c2d2c012d6ba89894391daa8">QueueJumper::Ptr</a>(<span class="keyword">new</span> <a class="code" href="classQueueJumper.html#a81c278d92787fd90e1690a6f0dea7ef9">QueueJumper</a>()); }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="classDataFetcher.html#aa47b487725b70a8a16000ed9e83ad927">DataFetcher::operator()()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classQueueJumper_a5b17c2980aa09df97b92423481e24dc1_icgraph.png" border="0" usemap="#classQueueJumper_a5b17c2980aa09df97b92423481e24dc1_icgraph" alt=""/></div>
<map name="classQueueJumper_a5b17c2980aa09df97b92423481e24dc1_icgraph" id="classQueueJumper_a5b17c2980aa09df97b92423481e24dc1_icgraph">
<area shape="rect" title="QueueJumper." alt="" coords="228,5,387,32"/>
<area shape="rect" href="classDataFetcher.html#aa47b487725b70a8a16000ed9e83ad927" title=" " alt="" coords="5,5,180,32"/>
</map>
</div>

</div>
</div>
<a id="a66bc37b1160a29de9f47ebc0766f2b47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66bc37b1160a29de9f47ebc0766f2b47">&#9670;&nbsp;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QueueJumper::operator() </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  boost::mutex::scoped_lock <span class="keyword">const</span> lock(<a class="code" href="classQueueJumper.html#aac5382e9016830f9eee55b9f32215782">mut</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classQueueJumper.html#a26605a27165f871fd14e586fa3c80b6e">isSet</a>)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="classQueueJumper.html#af34fdb126ea4078e80dde8038a95c564">fn</a>();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="classQueueJumper.html#a9e5a773c17b4649f07c61b22751f6ba8">inQueue</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5dbf1296ec716e239f34b7eed4343ca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dbf1296ec716e239f34b7eed4343ca2">&#9670;&nbsp;</a></span>setWork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool QueueJumper::setWork </td>
          <td>(</td>
          <td class="paramtype">boost::function&lt; void()&gt; const &amp;&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the function to be executed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>Function to be called from within <a class="el" href="classQueueJumper.html#a66bc37b1160a29de9f47ebc0766f2b47">operator()()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the <a class="el" href="classQueueJumper.html">QueueJumper</a> is still in the queue (and the function will get executed) </td></tr>
    <tr><td class="paramname">false</td><td>if the <a class="el" href="classQueueJumper.html">QueueJumper</a> no longer is in the queue (<code>fn</code> will be ignored) </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  boost::mutex::scoped_lock <span class="keyword">const</span> lock(<a class="code" href="classQueueJumper.html#aac5382e9016830f9eee55b9f32215782">mut</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classQueueJumper.html#a9e5a773c17b4649f07c61b22751f6ba8">inQueue</a>)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Our turn hasn&#39;t passed yet. Accept work.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="classQueueJumper.html#af34fdb126ea4078e80dde8038a95c564">fn</a>    = fn_;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="classQueueJumper.html#a26605a27165f871fd14e586fa3c80b6e">isSet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// Our turn has passed. We cannot do the work</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classQueueJumper.html#a9e5a773c17b4649f07c61b22751f6ba8">inQueue</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af34fdb126ea4078e80dde8038a95c564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af34fdb126ea4078e80dde8038a95c564">&#9670;&nbsp;</a></span>fn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::function&lt;void()&gt; QueueJumper::fn</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e5a773c17b4649f07c61b22751f6ba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e5a773c17b4649f07c61b22751f6ba8">&#9670;&nbsp;</a></span>inQueue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool QueueJumper::inQueue {true}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a26605a27165f871fd14e586fa3c80b6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26605a27165f871fd14e586fa3c80b6e">&#9670;&nbsp;</a></span>isSet</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool QueueJumper::isSet {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aac5382e9016830f9eee55b9f32215782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5382e9016830f9eee55b9f32215782">&#9670;&nbsp;</a></span>mut</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex QueueJumper::mut</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>inc/scroom/<a class="el" href="threadpool_8hh_source.html">threadpool.hh</a></li>
<li>libs/threadpool/src/<a class="el" href="threadpoolimpl_8cc.html">threadpoolimpl.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassQueueJumper_html_a9e5a773c17b4649f07c61b22751f6ba8"><div class="ttname"><a href="classQueueJumper.html#a9e5a773c17b4649f07c61b22751f6ba8">QueueJumper::inQueue</a></div><div class="ttdeci">bool inQueue</div><div class="ttdef"><b>Definition:</b> threadpool.hh:541</div></div>
<div class="ttc" id="aclassQueueJumper_html_af34fdb126ea4078e80dde8038a95c564"><div class="ttname"><a href="classQueueJumper.html#af34fdb126ea4078e80dde8038a95c564">QueueJumper::fn</a></div><div class="ttdeci">boost::function&lt; void()&gt; fn</div><div class="ttdef"><b>Definition:</b> threadpool.hh:544</div></div>
<div class="ttc" id="aclassQueueJumper_html_ae686df54c2d2c012d6ba89894391daa8"><div class="ttname"><a href="classQueueJumper.html#ae686df54c2d2c012d6ba89894391daa8">QueueJumper::Ptr</a></div><div class="ttdeci">boost::shared_ptr&lt; QueueJumper &gt; Ptr</div><div class="ttdef"><b>Definition:</b> threadpool.hh:537</div></div>
<div class="ttc" id="aclassQueueJumper_html_aac5382e9016830f9eee55b9f32215782"><div class="ttname"><a href="classQueueJumper.html#aac5382e9016830f9eee55b9f32215782">QueueJumper::mut</a></div><div class="ttdeci">boost::mutex mut</div><div class="ttdef"><b>Definition:</b> threadpool.hh:540</div></div>
<div class="ttc" id="aclassQueueJumper_html_a81c278d92787fd90e1690a6f0dea7ef9"><div class="ttname"><a href="classQueueJumper.html#a81c278d92787fd90e1690a6f0dea7ef9">QueueJumper::QueueJumper</a></div><div class="ttdeci">QueueJumper()=default</div></div>
<div class="ttc" id="aclassQueueJumper_html_a26605a27165f871fd14e586fa3c80b6e"><div class="ttname"><a href="classQueueJumper.html#a26605a27165f871fd14e586fa3c80b6e">QueueJumper::isSet</a></div><div class="ttdeci">bool isSet</div><div class="ttdef"><b>Definition:</b> threadpool.hh:542</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classQueueJumper.html">QueueJumper</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
