<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scroom: ThreadPool::PrivateData Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Scroom
   &#160;<span id="projectnumber">0.12.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classThreadPool_1_1PrivateData.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classThreadPool_1_1PrivateData-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ThreadPool::PrivateData Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Data needed by the threads to do their work.  
 <a href="classThreadPool_1_1PrivateData.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for ThreadPool::PrivateData:</div>
<div class="dyncontent">
<div class="center"><img src="classThreadPool_1_1PrivateData__coll__graph.png" border="0" usemap="#ThreadPool_1_1PrivateData_coll__map" alt="Collaboration graph"/></div>
<map name="ThreadPool_1_1PrivateData_coll__map" id="ThreadPool_1_1PrivateData_coll__map">
<area shape="rect" id="node4" href="structThreadPool_1_1Job.html" title="{ThreadPool::Job\n|+ queue\l+ fn\l|+ Job()\l+ Job()\l}" alt="" coords="5,145,128,252"/>
<area shape="rect" id="node5" title="STL class. " alt="" coords="152,160,280,237"/>
<area shape="rect" id="node7" title="STL class. " alt="" coords="305,160,439,237"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae05fb04b3e3581e9b91a8c5fc4c6fa88"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#ae05fb04b3e3581e9b91a8c5fc4c6fa88">Ptr</a> = boost::shared_ptr&lt; <a class="el" href="classThreadPool_1_1PrivateData.html">PrivateData</a> &gt;</td></tr>
<tr class="separator:ae05fb04b3e3581e9b91a8c5fc4c6fa88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a143d1a1ad9f30812e5bd8ca4fa10ed6b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classThreadPool_1_1PrivateData.html#ae05fb04b3e3581e9b91a8c5fc4c6fa88">Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#a143d1a1ad9f30812e5bd8ca4fa10ed6b">create</a> (bool <a class="el" href="classThreadPool_1_1PrivateData.html#ad582c5ec33d97e087f5a0fd1f9b7b26b">completeAllJobsBeforeDestruction</a>)</td></tr>
<tr class="separator:a143d1a1ad9f30812e5bd8ca4fa10ed6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afdaddae62259f51ff00c2ebd83534644"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#afdaddae62259f51ff00c2ebd83534644">jobcount</a></td></tr>
<tr class="memdesc:afdaddae62259f51ff00c2ebd83534644"><td class="mdescLeft">&#160;</td><td class="mdescRight">current number of tasks in ThreadPool::jobs  <a href="#afdaddae62259f51ff00c2ebd83534644">More...</a><br /></td></tr>
<tr class="separator:afdaddae62259f51ff00c2ebd83534644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7feba8d6958a00098773baf0329143"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#abf7feba8d6958a00098773baf0329143">mut</a></td></tr>
<tr class="memdesc:abf7feba8d6958a00098773baf0329143"><td class="mdescLeft">&#160;</td><td class="mdescRight">For protecting ThreadPool::jobs.  <a href="#abf7feba8d6958a00098773baf0329143">More...</a><br /></td></tr>
<tr class="separator:abf7feba8d6958a00098773baf0329143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9710d6d924eb7597b8e18dcd3edb0d88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#a9710d6d924eb7597b8e18dcd3edb0d88">alive</a></td></tr>
<tr class="memdesc:a9710d6d924eb7597b8e18dcd3edb0d88"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>true</code> if this <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> is not in the process of being destroyed  <a href="#a9710d6d924eb7597b8e18dcd3edb0d88">More...</a><br /></td></tr>
<tr class="separator:a9710d6d924eb7597b8e18dcd3edb0d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4ebb6865a7ea1da71d48a2c4e78743"><td class="memItemLeft" align="right" valign="top">boost::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#a4b4ebb6865a7ea1da71d48a2c4e78743">cond</a></td></tr>
<tr class="memdesc:a4b4ebb6865a7ea1da71d48a2c4e78743"><td class="mdescLeft">&#160;</td><td class="mdescRight">For signalling newly queued jobs.  <a href="#a4b4ebb6865a7ea1da71d48a2c4e78743">More...</a><br /></td></tr>
<tr class="separator:a4b4ebb6865a7ea1da71d48a2c4e78743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7621072df71077e9d8dd3f2417bd7526"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::queue&lt; <a class="el" href="structThreadPool_1_1Job.html">Job</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#a7621072df71077e9d8dd3f2417bd7526">jobs</a></td></tr>
<tr class="memdesc:a7621072df71077e9d8dd3f2417bd7526"><td class="mdescLeft">&#160;</td><td class="mdescRight">Jobs that remain to be executed.  <a href="#a7621072df71077e9d8dd3f2417bd7526">More...</a><br /></td></tr>
<tr class="separator:a7621072df71077e9d8dd3f2417bd7526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad582c5ec33d97e087f5a0fd1f9b7b26b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#ad582c5ec33d97e087f5a0fd1f9b7b26b">completeAllJobsBeforeDestruction</a></td></tr>
<tr class="memdesc:ad582c5ec33d97e087f5a0fd1f9b7b26b"><td class="mdescLeft">&#160;</td><td class="mdescRight">If <code>true</code>, this <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> completes all jobs before being destroyed.  <a href="#ad582c5ec33d97e087f5a0fd1f9b7b26b">More...</a><br /></td></tr>
<tr class="separator:ad582c5ec33d97e087f5a0fd1f9b7b26b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68e087d3440145b266445230d0d3246a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classThreadPool_1_1Queue.html#a757addfd3fa8afc091aac9f53d2ed350">Queue::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#a68e087d3440145b266445230d0d3246a">defaultQueue</a></td></tr>
<tr class="memdesc:a68e087d3440145b266445230d0d3246a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the default <a class="el" href="classThreadPool_1_1Queue.html" title="Represent a Queue in the ThreadPool. ">Queue</a>.  <a href="#a68e087d3440145b266445230d0d3246a">More...</a><br /></td></tr>
<tr class="separator:a68e087d3440145b266445230d0d3246a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4b6dd0e750c2115b87ec80585ad5620e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadPool_1_1PrivateData.html#a4b6dd0e750c2115b87ec80585ad5620e">PrivateData</a> (bool <a class="el" href="classThreadPool_1_1PrivateData.html#ad582c5ec33d97e087f5a0fd1f9b7b26b">completeAllJobsBeforeDestruction</a>)</td></tr>
<tr class="memdesc:a4b6dd0e750c2115b87ec80585ad5620e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classThreadPool_1_1PrivateData.html" title="Data needed by the threads to do their work. ">ThreadPool::PrivateData</a>.  <a href="#a4b6dd0e750c2115b87ec80585ad5620e">More...</a><br /></td></tr>
<tr class="separator:a4b6dd0e750c2115b87ec80585ad5620e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Data needed by the threads to do their work. </p>
<p>It used to be that <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> destruction blocked until the last thread finished, which was a major cause of deadlock when a <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> thread held the last reference to its <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a>.</p>
<p>To fix this, it becomes necessary to destroy <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> objects, even though there still are running threads. These threads need access to some data, in order to complete any currently running jobs, and in order to determine that they, themselves should finish. Objects of this class contain that data. Both <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> objects, as well as threads running in a <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a>, will have a reference to objects of this class.</p>
<p>Waiting for all threads to finish is now done by the ThreadWaiter class, which has only one instance, declared static. Hence, it is always destroyed on the main thread, which never is part of any threadpool. Hence, the deadlock is avoided. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00199">199</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ae05fb04b3e3581e9b91a8c5fc4c6fa88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae05fb04b3e3581e9b91a8c5fc4c6fa88">&#9670;&nbsp;</a></span>Ptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classThreadPool_1_1PrivateData.html#ae05fb04b3e3581e9b91a8c5fc4c6fa88">ThreadPool::PrivateData::Ptr</a> =  boost::shared_ptr&lt;<a class="el" href="classThreadPool_1_1PrivateData.html">PrivateData</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00202">202</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4b6dd0e750c2115b87ec80585ad5620e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6dd0e750c2115b87ec80585ad5620e">&#9670;&nbsp;</a></span>PrivateData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ThreadPool::PrivateData::PrivateData </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>completeAllJobsBeforeDestruction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classThreadPool_1_1PrivateData.html" title="Data needed by the threads to do their work. ">ThreadPool::PrivateData</a>. </p>

<p class="definition">Definition at line <a class="el" href="threadpoolimpl_8cc_source.html#l00201">201</a> of file <a class="el" href="threadpoolimpl_8cc_source.html">threadpoolimpl.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="threadpoolimpl_8cc_source.html#l00208">create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  : <a class="code" href="classThreadPool_1_1PrivateData.html#afdaddae62259f51ff00c2ebd83534644">jobcount</a>(0)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  , <a class="code" href="classThreadPool_1_1PrivateData.html#a9710d6d924eb7597b8e18dcd3edb0d88">alive</a>(<span class="keyword">true</span>)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  , <a class="code" href="classThreadPool_1_1PrivateData.html#ad582c5ec33d97e087f5a0fd1f9b7b26b">completeAllJobsBeforeDestruction</a>(completeAllJobsBeforeDestruction_)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  , <a class="code" href="classThreadPool_1_1PrivateData.html#a68e087d3440145b266445230d0d3246a">defaultQueue</a>(<a class="code" href="classThreadPool.html#a7d435b8c6eff3ffcf5b9043bd50048c2">ThreadPool::defaultQueue</a>())</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{}</div><div class="ttc" id="classThreadPool_1_1PrivateData_html_a68e087d3440145b266445230d0d3246a"><div class="ttname"><a href="classThreadPool_1_1PrivateData.html#a68e087d3440145b266445230d0d3246a">ThreadPool::PrivateData::defaultQueue</a></div><div class="ttdeci">Queue::Ptr defaultQueue</div><div class="ttdoc">Reference to the default Queue. </div><div class="ttdef"><b>Definition:</b> <a href="threadpool_8hh_source.html#l00243">threadpool.hh:243</a></div></div>
<div class="ttc" id="classThreadPool_1_1PrivateData_html_afdaddae62259f51ff00c2ebd83534644"><div class="ttname"><a href="classThreadPool_1_1PrivateData.html#afdaddae62259f51ff00c2ebd83534644">ThreadPool::PrivateData::jobcount</a></div><div class="ttdeci">unsigned int jobcount</div><div class="ttdoc">current number of tasks in ThreadPool::jobs </div><div class="ttdef"><b>Definition:</b> <a href="threadpool_8hh_source.html#l00205">threadpool.hh:205</a></div></div>
<div class="ttc" id="classThreadPool_1_1PrivateData_html_a9710d6d924eb7597b8e18dcd3edb0d88"><div class="ttname"><a href="classThreadPool_1_1PrivateData.html#a9710d6d924eb7597b8e18dcd3edb0d88">ThreadPool::PrivateData::alive</a></div><div class="ttdeci">bool alive</div><div class="ttdoc">true if this ThreadPool is not in the process of being destroyed </div><div class="ttdef"><b>Definition:</b> <a href="threadpool_8hh_source.html#l00207">threadpool.hh:207</a></div></div>
<div class="ttc" id="classThreadPool_html_a7d435b8c6eff3ffcf5b9043bd50048c2"><div class="ttname"><a href="classThreadPool.html#a7d435b8c6eff3ffcf5b9043bd50048c2">ThreadPool::defaultQueue</a></div><div class="ttdeci">static Queue::Ptr defaultQueue()</div><div class="ttdef"><b>Definition:</b> <a href="threadpoolimpl_8cc_source.html#l00375">threadpoolimpl.cc:375</a></div></div>
<div class="ttc" id="classThreadPool_1_1PrivateData_html_ad582c5ec33d97e087f5a0fd1f9b7b26b"><div class="ttname"><a href="classThreadPool_1_1PrivateData.html#ad582c5ec33d97e087f5a0fd1f9b7b26b">ThreadPool::PrivateData::completeAllJobsBeforeDestruction</a></div><div class="ttdeci">bool completeAllJobsBeforeDestruction</div><div class="ttdoc">If true, this ThreadPool completes all jobs before being destroyed. </div><div class="ttdef"><b>Definition:</b> <a href="threadpool_8hh_source.html#l00226">threadpool.hh:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a143d1a1ad9f30812e5bd8ca4fa10ed6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a143d1a1ad9f30812e5bd8ca4fa10ed6b">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classThreadPool_1_1PrivateData.html#ae05fb04b3e3581e9b91a8c5fc4c6fa88">ThreadPool::PrivateData::Ptr</a> ThreadPool::PrivateData::create </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>completeAllJobsBeforeDestruction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpoolimpl_8cc_source.html#l00208">208</a> of file <a class="el" href="threadpoolimpl_8cc_source.html">threadpoolimpl.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classThreadPool_1_1PrivateData.html#ae05fb04b3e3581e9b91a8c5fc4c6fa88">Ptr</a>(<span class="keyword">new</span> <a class="code" href="classThreadPool_1_1PrivateData.html#a4b6dd0e750c2115b87ec80585ad5620e">PrivateData</a>(<a class="code" href="classThreadPool_1_1PrivateData.html#ad582c5ec33d97e087f5a0fd1f9b7b26b">completeAllJobsBeforeDestruction</a>));</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="ttc" id="classThreadPool_1_1PrivateData_html_a4b6dd0e750c2115b87ec80585ad5620e"><div class="ttname"><a href="classThreadPool_1_1PrivateData.html#a4b6dd0e750c2115b87ec80585ad5620e">ThreadPool::PrivateData::PrivateData</a></div><div class="ttdeci">PrivateData(bool completeAllJobsBeforeDestruction)</div><div class="ttdoc">ThreadPool::PrivateData. </div><div class="ttdef"><b>Definition:</b> <a href="threadpoolimpl_8cc_source.html#l00201">threadpoolimpl.cc:201</a></div></div>
<div class="ttc" id="classThreadPool_1_1PrivateData_html_ae05fb04b3e3581e9b91a8c5fc4c6fa88"><div class="ttname"><a href="classThreadPool_1_1PrivateData.html#ae05fb04b3e3581e9b91a8c5fc4c6fa88">ThreadPool::PrivateData::Ptr</a></div><div class="ttdeci">boost::shared_ptr&lt; PrivateData &gt; Ptr</div><div class="ttdef"><b>Definition:</b> <a href="threadpool_8hh_source.html#l00202">threadpool.hh:202</a></div></div>
<div class="ttc" id="classThreadPool_1_1PrivateData_html_ad582c5ec33d97e087f5a0fd1f9b7b26b"><div class="ttname"><a href="classThreadPool_1_1PrivateData.html#ad582c5ec33d97e087f5a0fd1f9b7b26b">ThreadPool::PrivateData::completeAllJobsBeforeDestruction</a></div><div class="ttdeci">bool completeAllJobsBeforeDestruction</div><div class="ttdoc">If true, this ThreadPool completes all jobs before being destroyed. </div><div class="ttdef"><b>Definition:</b> <a href="threadpool_8hh_source.html#l00226">threadpool.hh:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a9710d6d924eb7597b8e18dcd3edb0d88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9710d6d924eb7597b8e18dcd3edb0d88">&#9670;&nbsp;</a></span>alive</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ThreadPool::PrivateData::alive</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>true</code> if this <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> is not in the process of being destroyed </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00207">207</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<a id="ad582c5ec33d97e087f5a0fd1f9b7b26b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad582c5ec33d97e087f5a0fd1f9b7b26b">&#9670;&nbsp;</a></span>completeAllJobsBeforeDestruction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ThreadPool::PrivateData::completeAllJobsBeforeDestruction</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If <code>true</code>, this <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> completes all jobs before being destroyed. </p>
<p>If it is false, the <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> will remove unfinished jobs from the queue without executing them, and then self-destruct. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00226">226</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<a id="a4b4ebb6865a7ea1da71d48a2c4e78743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b4ebb6865a7ea1da71d48a2c4e78743">&#9670;&nbsp;</a></span>cond</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::condition_variable ThreadPool::PrivateData::cond</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For signalling newly queued jobs. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00208">208</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<a id="a68e087d3440145b266445230d0d3246a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68e087d3440145b266445230d0d3246a">&#9670;&nbsp;</a></span>defaultQueue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classThreadPool_1_1Queue.html#a757addfd3fa8afc091aac9f53d2ed350">Queue::Ptr</a> ThreadPool::PrivateData::defaultQueue</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reference to the default <a class="el" href="classThreadPool_1_1Queue.html" title="Represent a Queue in the ThreadPool. ">Queue</a>. </p>
<p>If we don't store a reference to the default <a class="el" href="classThreadPool_1_1Queue.html" title="Represent a Queue in the ThreadPool. ">Queue</a> here, then objects calling <a class="el" href="classThreadPool.html#a608c3403d2d99530b22bb732e818f3ea" title="Schedule the given job at the given priority. ">schedule()</a> without a <a class="el" href="classThreadPool_1_1Queue.html" title="Represent a Queue in the ThreadPool. ">Queue</a> argument (hence using the default <a class="el" href="classThreadPool_1_1Queue.html" title="Represent a Queue in the ThreadPool. ">Queue</a>), may find that they are themselves holding the last reference to the <a class="el" href="classThreadPool.html#a7d435b8c6eff3ffcf5b9043bd50048c2">ThreadPool::defaultQueue()</a> object. That could result in deadlock, if the thread doing the scheduling is itself a <a class="el" href="classThreadPool.html" title="Generic threadpool. ">ThreadPool</a> thread. Recall that destroying a <a class="el" href="classThreadPool_1_1Queue.html" title="Represent a Queue in the ThreadPool. ">Queue</a> blocks until any currently running tasks are finished, and hence a task would be infinitely waiting for itself to finish.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/kees-jan/scroom/issues/2">https://github.com/kees-jan/scroom/issues/2</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00243">243</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<a id="afdaddae62259f51ff00c2ebd83534644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdaddae62259f51ff00c2ebd83534644">&#9670;&nbsp;</a></span>jobcount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ThreadPool::PrivateData::jobcount</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>current number of tasks in ThreadPool::jobs </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00205">205</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<a id="a7621072df71077e9d8dd3f2417bd7526"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7621072df71077e9d8dd3f2417bd7526">&#9670;&nbsp;</a></span>jobs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, std::queue&lt;<a class="el" href="structThreadPool_1_1Job.html">Job</a>&gt; &gt; ThreadPool::PrivateData::jobs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Jobs that remain to be executed. </p>
<p>The map contains for each priority that has jobs, a queue containing those jobs. Once a queue is empty, it is removed from the map. If a new job for that priority is scheduled, it is added again. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00218">218</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<a id="abf7feba8d6958a00098773baf0329143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf7feba8d6958a00098773baf0329143">&#9670;&nbsp;</a></span>mut</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex ThreadPool::PrivateData::mut</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For protecting ThreadPool::jobs. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8hh_source.html#l00206">206</a> of file <a class="el" href="threadpool_8hh_source.html">threadpool.hh</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>inc/scroom/<a class="el" href="threadpool_8hh_source.html">threadpool.hh</a></li>
<li>libs/threadpool/src/<a class="el" href="threadpoolimpl_8cc_source.html">threadpoolimpl.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classThreadPool.html">ThreadPool</a></li><li class="navelem"><a class="el" href="classThreadPool_1_1PrivateData.html">PrivateData</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
